CREATE FUNCTION [dbo].[isResidantInterdit](@residantid NVARCHAR(14),@dt DATETIME) RETURNS varchar AS
 BEGIN
    DECLARE @IdRes NVARCHAR(14)
    DECLARE @Retour NVARCHAR(50)
    set @IdRes ='0'
	Set @IdRes=(SELECT RESIDANTID FROM RESIDANTS WHERE INTERDIT=0 AND (CONVERT(DATETIME,@dt,103) BETWEEN CONVERT(DATETIME,DEBUTINTERDIT,103) AND CONVERT(DATETIME,FININTERDIT,103)) AND RESIDANTID=@residantid)
	IF @IdRes<>'' and @IdRes is not null BEGIN
		Set @Retour ='0'
	END
	ELSE set @Retour ='1'
    RETURN @Retour
 END